###
# LinkGen AI - Ejemplos de Flujo de Trabajo API
# URL Base: http://localhost:8080
#
# Usuario de Desarrollo: Se crea automáticamente al iniciar la aplicación
# - User ID: 000000000000000000000001
# - Idioma: Español (es)
# - Topics por defecto: Inteligencia Artificial, Desarrollo Backend, TypeScript
# - Prompts en español configurados automáticamente
#
# Puedes crear tus propios topics y gestionarlos a través de los endpoints de Topics
###

@baseUrl = http://localhost:8080
@devUserId = 000000000000000000000001
@ideaId = REPLACE_WITH_ACTUAL_IDEA_ID
@draftId = REPLACE_WITH_ACTUAL_DRAFT_ID
@topicId = REPLACE_WITH_ACTUAL_TOPIC_ID
@promptId = REPLACE_WITH_ACTUAL_PROMPT_ID

###
# Health Check Endpoints
###

### Get API Health Status
GET {{baseUrl}}/health HTTP/1.1
Content-Type: application/json

###
### Get Readiness Status
GET {{baseUrl}}/readiness HTTP/1.1
Content-Type: application/json

###
### Get Liveness Status
GET {{baseUrl}}/liveness HTTP/1.1
Content-Type: application/json

###
# Gestión de Topics (Temas)
###

### Obtener Todos los Topics del Usuario
GET {{baseUrl}}/v1/topics/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Crear un Nuevo Topic
# Al crear un topic, se generan automáticamente 10 ideas sobre ese tema
POST {{baseUrl}}/v1/topics HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "name": "DevOps y Cloud",
  "description": "Infraestructura como código, Kubernetes, AWS, Azure y mejores prácticas de DevOps"
}

###
### Crear Topic sobre Testing
POST {{baseUrl}}/v1/topics HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "name": "Testing y Calidad de Software",
  "description": "TDD, BDD, testing automatizado, test unitarios e integración continua"
}

###
### Actualizar un Topic
PUT {{baseUrl}}/v1/topics/{{topicId}} HTTP/1.1
Content-Type: application/json

{
  "name": "Inteligencia Artificial Avanzada",
  "description": "Machine Learning, Deep Learning, LLMs y aplicaciones de IA en la industria",
  "active": true
}

###
### Desactivar un Topic (soft delete)
PUT {{baseUrl}}/v1/topics/{{topicId}} HTTP/1.1
Content-Type: application/json

{
  "active": false
}

###
### Eliminar un Topic
DELETE {{baseUrl}}/v1/topics/{{topicId}} HTTP/1.1

###
# Gestión de Ideas
# Las ideas se generan automáticamente en español usando los prompts configurados
###

### Obtener Todas las Ideas del Usuario
GET {{baseUrl}}/v1/ideas/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Filtrar Ideas por Topic
GET {{baseUrl}}/v1/ideas/{{devUserId}}?topic={{topicId}}&limit=10 HTTP/1.1
Content-Type: application/json

###
### Obtener Primeras 5 Ideas
GET {{baseUrl}}/v1/ideas/{{devUserId}}?limit=5 HTTP/1.1
Content-Type: application/json

###
### Limpiar Todas las Ideas del Usuario
DELETE {{baseUrl}}/v1/ideas/{{devUserId}}/clear HTTP/1.1
Content-Type: application/json

###
# Gestión de Prompts (Plantillas de IA)
# Sistema de prompts personalizables para generar ideas y drafts
###

### Obtener Todos los Prompts del Usuario
GET {{baseUrl}}/v1/prompts/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Filtrar Prompts por Tipo (ideas o drafts)
GET {{baseUrl}}/v1/prompts/{{devUserId}}?type=ideas HTTP/1.1
Content-Type: application/json

###
### Crear Nuevo Prompt para Generar Ideas (estilo técnico)
POST {{baseUrl}}/v1/prompts HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "type": "ideas",
  "prompt_template": "Eres un experto técnico en {related_topics}.\nGenera {count} ideas técnicas y detalladas sobre {name} con ejemplos de código.\nIdioma: {language}\n\nDevuelve SOLO un objeto JSON con este formato exacto:\n{\"ideas\": [\"idea1\", \"idea2\", \"idea3\", ...]}"
}

###
### Crear Prompt para Drafts (estilo casual)
POST {{baseUrl}}/v1/prompts HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "type": "drafts",
  "style_name": "casual",
  "prompt_template": "Eres un creador de contenido cercano para LinkedIn.\n\nBasándote en: {idea_content}\n\nCrea contenido casual y amigable que:\n- Use un tono conversacional\n- Incluya emojis relevantes\n- Sea directo y personal\n- Tenga un gancho fuerte\n\nDevuelve SOLO JSON:\n{\n  \"posts\": [\"post1\", \"post2\", \"post3\", \"post4\", \"post5\"],\n  \"articles\": [\"article1\"]\n}"
}

###
### Actualizar Prompt Existente
PATCH {{baseUrl}}/v1/prompts/{{promptId}} HTTP/1.1
Content-Type: application/json

{
  "prompt_template": "Eres un experto en {related_topics}.\nGenera {count} ideas innovadoras sobre {name}.\nIdioma: {language}\n\nJSON: {\"ideas\": [...]}"
}

###
### Desactivar un Prompt
PATCH {{baseUrl}}/v1/prompts/{{promptId}} HTTP/1.1
Content-Type: application/json

{
  "active": false
}

###
# Gestión de Drafts (Borradores)
###

### Generar Draft desde una Idea (Asíncrono - retorna job ID)
POST {{baseUrl}}/v1/drafts/generate HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "idea_id": "{{ideaId}}"
}

###
### Obtener Todos los Drafts del Usuario
GET {{baseUrl}}/v1/drafts/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Filtrar Drafts por Estado
GET {{baseUrl}}/v1/drafts/{{devUserId}}?status=draft&limit=10 HTTP/1.1
Content-Type: application/json

###
### Obtener Solo Drafts Publicados
GET {{baseUrl}}/v1/drafts/{{devUserId}}?status=published HTTP/1.1
Content-Type: application/json

###
### Refinar un Draft Existente (hacerlo más profesional)
POST {{baseUrl}}/v1/drafts/{{draftId}}/refine HTTP/1.1
Content-Type: application/json

{
  "prompt": "Hazlo más profesional y añade una llamada a la acción al final",
  "user_id": "{{devUserId}}"
}

###
### Refinar Draft (acortar y añadir datos)
POST {{baseUrl}}/v1/drafts/{{draftId}}/refine HTTP/1.1
Content-Type: application/json

{
  "prompt": "Acórtalo a 200 palabras, añade métricas o datos concretos y hazlo más atractivo",
  "user_id": "{{devUserId}}"
}

###
# Flujo de Trabajo Completo - Ejemplo Paso a Paso
###

### Paso 1: Verificar Estado de la API
GET {{baseUrl}}/health HTTP/1.1

###
### Paso 2: Obtener Topics del Usuario
# @name getTopics
GET {{baseUrl}}/v1/topics/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Paso 3: Crear un Nuevo Topic (Opcional)
# ⚠️ Al crear un topic, se generan automáticamente 10 ideas en español
POST {{baseUrl}}/v1/topics HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "name": "Arquitectura de Software",
  "description": "Diseño de sistemas, microservicios, patrones de arquitectura y escalabilidad"
}

###
### Paso 4: Obtener Ideas Disponibles (generadas automáticamente)
# @name getIdeas
GET {{baseUrl}}/v1/ideas/{{devUserId}}?limit=10 HTTP/1.1
Content-Type: application/json

###
### Paso 5: Ver Prompts Configurados (en español)
GET {{baseUrl}}/v1/prompts/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Paso 6: Generar Draft desde una Idea
# @name generateDraft
# Copia un idea_id real de la respuesta del Paso 4 y reemplázalo arriba en @ideaId
POST {{baseUrl}}/v1/drafts/generate HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "idea_id": "{{ideaId}}"
}

###
### Paso 7: Esperar unos segundos y Ver Drafts Generados
# @name getDrafts
GET {{baseUrl}}/v1/drafts/{{devUserId}}?status=draft HTTP/1.1
Content-Type: application/json

###
### Paso 8: Refinar el Draft Generado
# Copia un draft_id real de la respuesta del Paso 7 y reemplázalo arriba en @draftId
POST {{baseUrl}}/v1/drafts/{{draftId}}/refine HTTP/1.1
Content-Type: application/json

{
  "prompt": "Hazlo más conciso, añade hashtags relevantes y mejora el gancho inicial",
  "user_id": "{{devUserId}}"
}

###
### Paso 9: Ver Draft Actualizado
GET {{baseUrl}}/v1/drafts/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
# Notas Importantes:
# 
# CONFIGURACIÓN POR DEFECTO:
# - User ID de desarrollo: 000000000000000000000001
# - Idioma: Español (es)
# - Topics por defecto: Inteligencia Artificial, Desarrollo Backend, TypeScript
# - Prompts en español configurados automáticamente
# 
# GENERACIÓN AUTOMÁTICA DE IDEAS:
# - Al crear un nuevo topic, se generan automáticamente 10 ideas en español
# - Las ideas usan el prompt configurado con variables: {name}, {related_topics}, {language}, {count}
# - Los prompts se pueden personalizar mediante /v1/prompts
# 
# SISTEMA DE PROMPTS:
# - Tipo "ideas": Para generar ideas de contenido
# - Tipo "drafts": Para generar borradores (vinculado a un style_name)
# - Variables disponibles: {name}, {related_topics}, {language}, {count}, {idea_content}
# 
# PROCESO ASÍNCRONO:
# - /v1/drafts/generate retorna un job_id inmediatamente
# - La generación ocurre en segundo plano vía NATS
# - Consulta /v1/drafts/{userId} después de unos segundos para ver el resultado
# 
# FORMATOS:
# - Fechas en formato ISO 8601: "2024-12-06T15:30:00Z"
# - Estados de draft válidos: "draft", "published", "scheduled"
# - Tipos de prompt: "ideas", "drafts"
# 
# REEMPLAZAR IDs:
# - Después de cada operación, copia los IDs reales de las respuestas
# - Actualiza las variables @ideaId, @draftId, @topicId, @promptId al inicio del archivo
###
