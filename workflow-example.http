###
# LinkGen AI - API Workflow Examples
# Base URL: http://localhost:8080
#
# Development User: A predefined user is automatically created on startup
# - User ID: 000000000000000000000001
# - Default topics: Technology, Productivity, Leadership
#
# You can create your own topics and manage them through the Topics endpoints
###

@baseUrl = http://localhost:8080
@devUserId = 000000000000000000000001
@ideaId = 675319c1f8d4a2e8b7654321
@draftId = 675319c1f8d4a2e8b9876543
@topicId = 6934b5767e19b3f296cde3bc

###
# Health Check Endpoints
###

### Get API Health Status
GET {{baseUrl}}/health HTTP/1.1
Content-Type: application/json

###
### Get Readiness Status
GET {{baseUrl}}/readiness HTTP/1.1
Content-Type: application/json

###
### Get Liveness Status
GET {{baseUrl}}/liveness HTTP/1.1
Content-Type: application/json

###
# Topics Management Endpoints
###

### Get All Topics for Dev User
GET {{baseUrl}}/v1/topics/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Create a New Topic
POST {{baseUrl}}/v1/topics HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "name": "Artificial Intelligence",
  "description": "Machine learning, deep learning, and AI applications in business"
}

###
### Update a Topic
PUT {{baseUrl}}/v1/topics/{{topicId}} HTTP/1.1
Content-Type: application/json

{
  "name": "AI & Machine Learning",
  "description": "Advanced topics in artificial intelligence and ML",
  "active": true
}

###
### Deactivate a Topic (soft disable)
PUT {{baseUrl}}/v1/topics/{{topicId}} HTTP/1.1
Content-Type: application/json

{
  "active": false
}

###
### Delete a Topic
DELETE {{baseUrl}}/v1/topics/{{topicId}} HTTP/1.1

###
# Ideas Management Endpoints
###

### Get Ideas for Dev User (all ideas)
GET {{baseUrl}}/v1/ideas/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Get Ideas with Topic Filter
GET {{baseUrl}}/v1/ideas/{{devUserId}}?topic={{topicId}}&limit=10 HTTP/1.1
Content-Type: application/json

###
### Get Ideas with Limit
GET {{baseUrl}}/v1/ideas/{{devUserId}}?limit=5 HTTP/1.1
Content-Type: application/json

###
### Clear All Ideas for Dev User
DELETE {{baseUrl}}/v1/ideas/{{devUserId}}/clear HTTP/1.1
Content-Type: application/json

###
# Drafts Management Endpoints
###

### Generate Draft from Idea (Async - returns job ID)
POST {{baseUrl}}/v1/drafts/generate HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "idea_id": "{{ideaId}}"
}

###
### Get All Drafts for Dev User
GET {{baseUrl}}/v1/drafts/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Get Drafts with Status Filter
GET {{baseUrl}}/v1/drafts/{{devUserId}}?status=draft&limit=10 HTTP/1.1
Content-Type: application/json

###
### Get Published Drafts Only
GET {{baseUrl}}/v1/drafts/{{devUserId}}?status=published HTTP/1.1
Content-Type: application/json

###
### Refine Existing Draft
POST {{baseUrl}}/v1/drafts/{{draftId}}/refine HTTP/1.1
Content-Type: application/json

{
  "prompt": "Make it more professional and add a call to action",
  "user_id": "{{devUserId}}"
}

###
### Refine Draft with Different Prompt
POST {{baseUrl}}/v1/drafts/{{draftId}}/refine HTTP/1.1
Content-Type: application/json

{
  "prompt": "Shorten it to 200 words and make it more engaging",
  "user_id": "{{devUserId}}"
}

###
# Complete Workflow Example
###

### Step 1: Check API Health
GET {{baseUrl}}/health HTTP/1.1

###
### Step 2: Get or Create Topics for Dev User
# @name getTopics
GET {{baseUrl}}/v1/topics/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
### Step 3: Create a New Topic (Optional)
POST {{baseUrl}}/v1/topics HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "name": "Software Architecture",
  "description": "System design, microservices, and scalable architectures"
}

###
### Step 4: Get Available Ideas for Dev User
# @name getIdeas
GET {{baseUrl}}/v1/ideas/{{devUserId}}?limit=10 HTTP/1.1
Content-Type: application/json

###
### Step 5: Generate Draft from First Idea
# @name generateDraft
POST {{baseUrl}}/v1/drafts/generate HTTP/1.1
Content-Type: application/json

{
  "user_id": "{{devUserId}}",
  "idea_id": "{{ideaId}}"
}

###
### Step 6: Wait a few seconds, then Get Drafts to see the generated draft
# @name getDrafts
GET {{baseUrl}}/v1/drafts/{{devUserId}}?status=draft HTTP/1.1
Content-Type: application/json

###
### Step 7: Refine the Generated Draft
POST {{baseUrl}}/v1/drafts/{{draftId}}/refine HTTP/1.1
Content-Type: application/json

{
  "prompt": "Make it more concise and add hashtags relevant to the topic",
  "user_id": "{{devUserId}}"
}

###
### Step 8: Get Updated Draft
GET {{baseUrl}}/v1/drafts/{{devUserId}} HTTP/1.1
Content-Type: application/json

###
# Notes:
# - Development user ID is hardcoded: 000000000000000000000001
# - Default topics (Technology, Productivity, Leadership) are created automatically on startup
# - You can create, update, and delete topics as needed
# - Replace @ideaId and @draftId with actual IDs after generating content
# - The /v1/drafts/generate endpoint is asynchronous and returns a job_id immediately
# - Draft generation happens in the background via NATS messaging
# - Use the job_id or check the drafts list after a few seconds to see the generated draft
# - All dates/times are in ISO 8601 format (e.g., "2024-12-06T15:30:00Z")
# - Valid draft statuses: "draft", "published", "scheduled"
###
